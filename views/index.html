<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>To Hear No Echo</title>    
    <link rel="stylesheet" href="/home.css">
    <link rel="stylesheet" href="/global.css">
    <script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
    <script src="/script.js" defer></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/functions.js"></script>
    <script>
      var socket = io()
      
      window.onload = async () => {
        let body = document.querySelector('body')
        let bg = document.querySelector('#title')
        let noise = document.querySelector("#noise")
        
        // floating background
        body.addEventListener('mousemove', (event) => {
          bg.style.transform = `translate(${showCoords(event,50)[0]}px, ${showCoords(event,50)[1]}px)`
        })
        body.addEventListener('touchmove', (event) => {
          bg.style.transform = `translate(${touchCoords(event,50)[0]}px, ${touchCoords(event,50)[1]}px)`
        })
        
        // create a span for each word
        let btexts = document.querySelectorAll(".btext")
        for (let btext of btexts) {
          btext.innerHTML = btext.textContent.replace(/\b(\w+)\b/g, `<span style="font-family:oldround0">$1</span>`)
        }
        // Text degradation
        let btextWords = document.querySelectorAll(".btext span")
        textDecay(btextWords)
        textDecayMobile(btextWords)
        
        // add noises on click
        body.addEventListener('click', (event) => {
          let click = getClick(event)
          // console.log(click)          
          noise.innerHTML += `<div class="pixel" style="top:${click.y}px; left:${click.x}px;)"></div>`
          socket.emit('new click', click)
        })
        
        // get noises on fresh
        socket.on('refresh data', (noises)=>{
          let n = noises.length
          noise.innerHTML = getNoises(noises, n, "x", "y")
        })
      }
    </script>
    
  </head>  
  <body>
    
    <div id="title">
      <div class="center name">
        <div class="btext">Yale School Of Art</div>
        <div class="btext">MFA Sculpture Thesis Exhibition</div>
        <div class="btext">March 22 - 28, 2021</div>
<!--         <br><div class="btext footnote">Online Exhibition Goes Live on March 26</div> -->
      </div>
    </div>

    <div id="corners">
      <div id="corner1">To</div>
      <div id="corner2">Hear</div>
      <div id="corner3">No</div>
      <div id="corner4">Echo</div>
    </div>

    <nav id="top">
      <a class="entrance left-name" href="/saejun">Saejun Kim</a>
      <a class="entrance right-name" href="/armando">Armando Cort√©s</a>
    </nav>
    <nav id="right">
      <a class="entrance" href="/jeenho">Jeenho Seo</a>
    </nav>
    <nav id="bottom">
      <a class="entrance left-name" href="/freddy">Freddy Villalobos</a>
      <a class="entrance right-name" href="/hyeree">Hyeree Ro</a>
    </nav>
    <nav id="left">
      <a class="entrance" href="/stella">Stella Zhong</a>
    </nav>
    
    <div id="noise"></div>
    <div id="loading-fonts">
      <span style="font-family: oldround0;">0</span>
      <span style="font-family: oldround1;">1</span>
      <span style="font-family: oldround2;">2</span>
      <span style="font-family: oldround3;">3</span>
      <span style="font-family: oldround4;">4</span>
      <span style="font-family: oldround5;">5</span>
      <span style="font-family: oldround6;">6</span>
      <span style="font-family: oldround7;">7</span>
      <span style="font-family: oldround8;">8</span>
      <span style="font-family: oldround9;">9</span>
    </div>
    <div id="showimage" style="pointer-events: none;"></div>
    

  </body>
</html>
